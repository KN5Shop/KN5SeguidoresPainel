<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Pacotes</title>
</head>
<body>
    <form id="myForm">
        <label for="category">Categoria:</label>
        <select id="category" name="category">
            <option value="">Selecione uma categoria</option>
        </select>

        <label for="service">Serviço:</label>
        <select id="service" name="service">
            <option value="">Selecione um serviço</option>
        </select>

        <label for="package">Pacote:</label>
        <select id="package" name="package">
            <option value="">Selecione um pacote</option>
        </select>
    </form>

    <script>
        async function loadData() {
            try {
                const response = await fetch('data.json');
                if (!response.ok) throw new Error('Network response was not ok');
                const data = await response.json();

                const categorySelect = document.getElementById('category');
                const serviceSelect = document.getElementById('service');
                const packageSelect = document.getElementById('package');

                // Populate categories
                for (const category in data) {
                    if (data.hasOwnProperty(category)) {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category;
                        categorySelect.appendChild(option);
                    }
                }

                categorySelect.addEventListener('change', (event) => {
                    const selectedCategory = event.target.value;
                    serviceSelect.innerHTML = '<option value="">Selecione um serviço</option>';
                    packageSelect.innerHTML = '<option value="">Selecione um pacote</option>';

                    if (selectedCategory) {
                        for (const service in data[selectedCategory]) {
                            if (data[selectedCategory].hasOwnProperty(service)) {
                                const option = document.createElement('option');
                                option.value = service;
                                option.textContent = service;
                                serviceSelect.appendChild(option);
                            }
                        }
                    }
                });

                serviceSelect.addEventListener('change', (event) => {
                    const selectedCategory = categorySelect.value;
                    const selectedService = event.target.value;
                    packageSelect.innerHTML = '<option value="">Selecione um pacote</option>';

                    if (selectedCategory && selectedService) {
                        data[selectedCategory][selectedService].forEach(pkg => {
                            const option = document.createElement('option');
                            option.value = pkg.range;
                            option.textContent = `${pkg.range} - ${pkg.price}`;
                            packageSelect.appendChild(option);
                        });
                    }
                });
            } catch (error) {
                console.error('Erro ao carregar os dados:', error);
                alert('Não foi possível carregar os dados. Verifique o console para mais informações.');
            }
        }

        loadData();
    </script>
</body>
</html>
